\documentclass[10pt,a4paper]{article}
\input{packages}
\input{configuration}
\input{macros}

\title{Grothendieck duality: lecture 3 \\[.2em] \Large Grothendieck duality and applications}
\author{Pieter Belmans}
\date{January 22, 2014}

\begin{document}
\maketitle

\begin{abstract}
  
\end{abstract}

\tableofcontents

\clearpage

\setcounter{section}{-1}
\section{Reminder on derived categories}
\label{section:derived-categories}
The main idea behind derived categories is to make working with derived functors more natural. Recall that given a left (or right) exact functor between abelian categories one can determine its derived functors, which form a family of functors. These functors measure the extent to which the original functor is not exact, and they can give interesting algebraic or geometric information (depending on the original choice of functor).

The goal is to capture all of these in one single \emph{total derived functor}. So instead of working with the family~$(\RRR^nF)_{n\in\mathbb{N}}$ one wants to construct a functor~$\RRR F$ replacing the whole family.

To calculate (co)homology one uses injective (or projective, or flat, or flabby, or~\dots depending on the context) resolutions. So instead of using a single object, it is natural to consider a whole (co)chain complex of objects. That is why, instead of using an abelian category~$\mathcal{A}$ (take for example~$\mathcal{A}=\Coh/X$ the abelian category of coherent sheaves on a scheme), one uses~$\Ch(\mathcal{A})$: the abelian category of (co)chain complexes over~$\mathcal{A}$.

Because the calculation of (co)homology is invariant up to homotopy equivalence, we construct the category~$\KKK(\mathcal{A})$ by identifying morphisms in~$\Ch(\mathcal{A})$ which are homotopy equivalent. This is an intermediate step which can be skipped, but it helps in proving the main properties of the resulting object.

The final step is the most technical one, and consists of inverting quasi-isomorphisms to obtain the \emph{derived category}. Recall that a quasi-isomorphism is a morphism which induces isomorphisms in the (co)homology, i.e.\ if~$f\colon A^\bullet\to B^\bullet$ is a morphism such that~$\HH^n(A^\bullet)\cong\HH^n(B^\bullet)$ for all~$n$ then we would like~$A^\bullet$ and~$B^\bullet$ to be isomorphic in our desired derived category. This way, an object becomes isomorphic to its resolution. The way to obtain this is analogous to the localisation of a ring: we formally add inverses. That this construction works as intended follows from the Gabriel--Zisman theorem.

To summarise, the construction goes through the following steps
\begin{enumerate}
  \item pick an abelian category~$\mathcal{A}$ ($\Coh/X$, $\Qcoh/X$ or just~$A\mhyphen\mathrm{Mod}$ if you like);
  \item consider the abelian category of (co)chain complexes over~$\mathcal{A}$;
  \item construct the category of (co)chain complexes~$\KKK(\mathcal{A})$ over~$\mathcal{A}$ by identifying the homotopy equivalences in~$\Ch(\mathcal{A})$;
  \item construct the derived category~$\derived(\mathcal{A})$ of~$\mathcal{A}$ by inverting the quasi-isomorphisms in~$\KKK(\mathcal{A})$.
\end{enumerate}
Instead of considering all (co)chain complexes, we can also consider complexes which satisfy a certain boundedness assumption. We could ask for the complexes to be
\begin{enumerate}
  \item bounded on both sides (denoted~$\derived^\bounded(\mathcal{A})$),
  \item bounded below or above (denoted~$\derived^+(\mathcal{A})$ resp.\ $\derived^-(\mathcal{A})$),
  \item concentrated in positive or negative degrees (denoted~$\derived^{\geq 0}(\mathcal{A})$ resp.\ $\derived^{\leq 0}(\mathcal{A})$).
\end{enumerate}

\section{Grothendieck duality}
\label{section:grothendieck-duality}
\subsection{Motivation}
\label{subsection:motivation}

\subsection{The ideal theorem}
The first thing we can consider as a form of Grothendieck duality is \cite[Ideal theorem on page 6]{hartshorne-residues-and-duality}. This summarises what one tries to prove to be able to speak of a ``Grothendieck duality result''. After the statement we will collect some contexts in which we can prove this.
\begin{theorem}[Ideal theorem] {\ }
  \label{theorem:classical}
  \begin{enumerate}
    \item\label{enumerate:classical-a} For every morphism $f\colon X\to Y$ of finite type of preschemes, there is a functor
      \begin{equation}
        f^!\colon\derived(Y)\to\derived(X)
      \end{equation}
      such that
      \begin{enumerate}
        \item\label{enumerate:classical-a-1} if $g\colon Y\to Z$ is a second morphism of finite type, then $(g\circ f)^!=f^!\circ g^!$;
        \item\label{enumerate:classical-a-2} if $f$ is a smooth morphism, then
          \begin{equation}
            f^!(\mathcal{G})=f^*(\mathcal{G})\otimes\omega,
          \end{equation}
          where $\omega=\Omega_{X/Y}^n$ is the sheaf of highest order differentials;
        \item\label{enumerate:classical-a-3} if $f$ is a finite morphism, then
          \begin{equation}
            f^!(\mathcal{G})=\HHom_{\mathcal{O}_Y}(f_*\mathcal{O}_X,\mathcal{G})^\sim.
          \end{equation}
      \end{enumerate}
    \item\label{enumerate:classical-b} For every proper morphism $f\colon X\to Y$ of preschemes, there is a \emph{trace morphism}
      \begin{equation}
        \Tr_f\colon\RRR f_*\circ f^!\Rightarrow\identity
      \end{equation}
      of functors from $\derived(Y)$ to $\derived(X)$ such that
      \begin{enumerate}
        \item\label{enumerate:classical-b-1} if $g\colon Y\to Z$ is a second proper morphism, then $\Tr_{g\circ f}=\Tr_g\circ\Tr_f$;
        \item\label{enumerate:classical-b-2} if $X=\mathbb{P}_Y^n$, then $\Tr_f$ is the map deduced from the canonical isomorphism $\mathbf{R}^nf_*(\omega)\cong\mathcal{O}_Y$;
        \item\label{enumerate:classical-b-3} if $f$ is a finite morphism, then $\Tr_f$ is obtained from the natural map ``evaluation at one''
          \begin{equation}
            \HHom_{\mathcal{O}_Y}(f_*\mathcal{O}_X,\mathcal{G})\to\mathcal{G}.
          \end{equation}
      \end{enumerate}
    \item\label{enumerate:classical-c} If $f\colon X\to Y$ is a proper morphism, then the duality morphism
      \begin{equation}
        \Theta_f\colon\RRRHom_X(\mathcal{F},f^!(\mathcal{G}))\to\RRRHom_Y(\mathbf{R}f_*\mathcal{F},\mathcal{G})
      \end{equation}
      obtained by composing the natural map\footnote{Obtained as the Yoneda pairing, see \cite[page 5]{hartshorne-residues-and-duality}.} above with $\Tr_f$, is an isomorphism for $\mathcal{F}\in\derived(X)$ and $\mathcal{G}\in\derived(Y)$.
  \end{enumerate}
\end{theorem}
The question is: in which situations can we prove this ideal theorem? The answer (as per \cite{hartshorne-residues-and-duality}, nowadays it is more general) is:
\begin{enumerate}
  \item noetherian schemes of finite Krull dimensions and morphisms which factor through a suitable projective space \cite[\S III.8, \S III.10, \S III.11]{hartshorne-residues-and-duality}: all statements are applied for $\derived_\qc^+(-)$ except the last in which case $\mathcal{F}$ lives in $\derived_\qc^-(X)$;
  \item noetherian schemes which admit dualizing complexes (see \cite[\S V.10]{hartshorne-residues-and-duality}, it implies finite Krull dimension) and morphisms whose fibres are of bounded dimension \cite[\S VII.3]{hartshorne-residues-and-duality}: all statements are applied to $\derived_\coh^+(-)$ except the last in which case $\mathcal{F}$ lives in $\derived_\qc^-(X)$;
  \item noetherian schemes of finite Krull dimension and smooth morphisms \cite[\S VII.4]{hartshorne-residues-and-duality}: the results in \ref{enumerate:classical-a} are applied to $\derived_\qc^+(-)$, in \ref{enumerate:classical-b} to $\derived_\qc^\bounded(-)$ and in \ref{enumerate:classical-c} to $\mathcal{F}$ in $\derived_\qc^-(X)$ and $\mathcal{G}$ in $\derived_\qc^\bounded(Y)$;
  \item noetherian schemes and arbitrary morphisms \cite[appendix]{hartshorne-residues-and-duality}, but only statements \ref{enumerate:classical-a-1}, \ref{enumerate:classical-b-1} and \ref{enumerate:classical-c}: the results are applied to $\derived(\Qcoh(-))$.
\end{enumerate}

\begin{table}
  \centering
  \begin{tabular}{cccc}
    \toprule
    situation & $X$ and $Y$                           & $f$                             \\\midrule
    1         & noetherian, finite Krull dimension    & factor through $\mathbb{P}_Y^n$ \\
    2         & noetherian with dualizing complex  \\
    3         & noetherian, finite Krull dimension    & smooth\\
    4         & noetherian \\
    \bottomrule
  \end{tabular}
  \caption{Description of the 4 situations for Grothendieck duality in \cite{hartshorne-residues-and-duality}}
  \label{table:situations}
\end{table}

\begin{table}
  \centering
  \begin{tabular}{rccc}
    \toprule
    property           & situation & $\derived(X)$       & $\derived(Y)$ \\\midrule
    existence of $f^!$ & 1         &                     & $\derived_\qc^+(Y)$ \\
                       & 2         &                     & $\derived_\coh^+(Y)$ \\
                       & 3         &                     & $\derived_\qc^\bounded(Y)$ \\
                       & 4         &                     & $\derived^+(\Qcoh/Y)$ \\\addlinespace[.5em]
    trace morphism     & 1         &                     & $\derived_\qc^+(Y)$ \\
                       & 2         &                     & $\derived_\coh^+(Y)$ \\
                       & 3         &                     & $\derived_\qc^\bounded(Y)$ \\
                       & 4         &                     & $\derived^+(\Qcoh/Y)$ \\\addlinespace[.5em]
    duality            & 1         & $\derived_\qc^-(X)$ & $\derived_\qc^+(Y)$ \\
                       & 2         & $\derived_\qc^-(X)$ & $\derived_\coh^+(Y)$ \\
                       & 3         & $\derived_\qc^-(X)$ & $\derived_\qc^\bounded(Y)$ \\
                       & 4         & $\derived(\Qcoh/X)$ & $\derived^+(\Qcoh/Y)$ \\
    \bottomrule
  \end{tabular}
  \caption{Overview of the configuration of the derived categories for each of the three parts of a Grothendieck duality context}
  \label{table:situations-derived-categories}
\end{table}

\subsection{How to recover classical results?}
\label{subsection:classical-results}

\begin{table}
  \centering
  \begin{tabular}{cc}
    \toprule
    how nice is $X$? & how nice is $\omega_X^\circ$? \\\midrule
    $X$ smooth & $\omega_X^\circ=\bigwedge^{\dim X}\Omega_X[\dim X]$ \\
    $X$ Gorenstein & $\omega_X^\circ$ shift of a line bundle by $\dim X$ \\
    $X$ Cohen--Macaulay & $\omega_X^\circ$ shift of a sheaf by $\dim X$ \\
    $X$ arbitrary & $\omega_X^\circ$ is a complex
  \end{tabular}
  \caption{Comparison of singularness of $X$ and the look of $\omega_X^\circ$}
  \label{table:comparison-X-dualising-sheaf}
\end{table}

\section{History of the results}
\label{section:history}


\section{Applications}
\label{section:applications-grothendieck-duality}
\subsection{Local duality}
\label{subsection:local-duality}

\subsection{The yoga of six functors}
\label{subsection:six-functors-yoga}

\subsection{Fourier--Mukai transforms}
\label{subsection:fourier-mukai-transforms}

\printbibliography

\end{document}
